<!-- saved from url=(0014)about:internet -->
<pre class="code">
<span class="srcline"><span class="lineno"><a href="67,1" id="srcline1"> 1</a></span><span class="line"><span class="keyword">function</span> [<span class="var type1" id="S2T27U3">Rib</span>] = qib2Rib(<span class="var type1" id="S3T4U6">qib</span>)</span></span>
<span class="srcline"><span class="lineno"><a href="67,2" id="srcline2"> 2</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="67,3" id="srcline3"> 3</a></span><span class="line"><span class="comment">% Funkcija qib2Rib() racuna rotacijsku matricu iz zadanog kvaterniona.</span></span></span>
<span class="srcline"><span class="lineno"><a href="67,4" id="srcline4"> 4</a></span><span class="line"><span class="comment">% Ulazni parametri:</span></span></span>
<span class="srcline"><span class="lineno"><a href="67,5" id="srcline5"> 5</a></span><span class="line"><span class="comment">%       qib = zadani kvaternion (4D stupcasti vektor)</span></span></span>
<span class="srcline"><span class="lineno"><a href="67,6" id="srcline6"> 6</a></span><span class="line"><span class="comment">% Izlazni parametri:</span></span></span>
<span class="srcline"><span class="lineno"><a href="67,7" id="srcline7"> 7</a></span><span class="line"><span class="comment">%       Rib = izracunata rotacijska matrica (3x3)</span></span></span>
<span class="srcline"><span class="lineno"><a href="67,8" id="srcline8"> 8</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="67,9" id="srcline9"> 9</a></span><span class="line"><span class="comment">% Izracun elemenata rotacijske matrice iz kvaterniona</span></span></span>
<span class="srcline"><span class="lineno"><a href="67,10" id="srcline10">10</a></span><span class="line"><span class="mxinfo " id="T3:U3"><span class="var type1" id="S4T3U9">r11</span> = <span class="mxinfo  sgl" id="T3:U5"><span class="mxinfo  sgl" id="T3:U6"><span class="mxinfo  sgl" id="T3:U7"><span class="mxinfo  sgl" id="T3:U8"><span class="mxinfo  sgl" id="T3:U9"><span class="var type1" id="S3T4U15">qib</span>(<span class="mxinfo " id="T10:U11">1</span>)</span>^2</span>+<span class="mxinfo  sgl" id="T3:U12"><span class="mxinfo  sgl" id="T3:U13"><span class="var type1" id="S3T4U20">qib</span>(<span class="mxinfo " id="T10:U15">2</span>)</span>^2</span></span>-<span class="mxinfo  sgl" id="T3:U16"><span class="mxinfo  sgl" id="T3:U17"><span class="var type1" id="S3T4U25">qib</span>(<span class="mxinfo " id="T10:U19">3</span>)</span>^2</span></span>-<span class="mxinfo  sgl" id="T3:U20"><span class="mxinfo  sgl" id="T3:U21"><span class="var type1" id="S3T4U30">qib</span>(<span class="mxinfo " id="T10:U23">4</span>)</span>^2</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="67,11" id="srcline11">11</a></span><span class="line"><span class="mxinfo " id="T3:U24"><span class="var type1" id="S5T3U35">r12</span> = <span class="mxinfo  sgl" id="T3:U26">2*(<span class="mxinfo  sgl" id="T3:U27"><span class="mxinfo  sgl" id="T3:U28"><span class="mxinfo  sgl" id="T3:U29"><span class="var type1" id="S3T4U42">qib</span>(<span class="mxinfo " id="T10:U31">2</span>)</span>*<span class="mxinfo  sgl" id="T3:U32"><span class="var type1" id="S3T4U45">qib</span>(<span class="mxinfo " id="T10:U34">3</span>)</span></span>+<span class="mxinfo  sgl" id="T3:U35"><span class="mxinfo  sgl" id="T3:U36"><span class="var type1" id="S3T4U49">qib</span>(<span class="mxinfo " id="T10:U38">1</span>)</span>*<span class="mxinfo  sgl" id="T3:U39"><span class="var type1" id="S3T4U52">qib</span>(<span class="mxinfo " id="T10:U41">4</span>)</span></span></span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="67,12" id="srcline12">12</a></span><span class="line"><span class="mxinfo " id="T3:U42"><span class="var type1" id="S6T3U56">r13</span> = <span class="mxinfo  sgl" id="T3:U44">2*(<span class="mxinfo  sgl" id="T3:U45"><span class="mxinfo  sgl" id="T3:U46"><span class="mxinfo  sgl" id="T3:U47"><span class="var type1" id="S3T4U63">qib</span>(<span class="mxinfo " id="T10:U49">2</span>)</span>*<span class="mxinfo  sgl" id="T3:U50"><span class="var type1" id="S3T4U66">qib</span>(<span class="mxinfo " id="T10:U52">4</span>)</span></span>-<span class="mxinfo  sgl" id="T3:U53"><span class="mxinfo  sgl" id="T3:U54"><span class="var type1" id="S3T4U70">qib</span>(<span class="mxinfo " id="T10:U56">1</span>)</span>*<span class="mxinfo  sgl" id="T3:U57"><span class="var type1" id="S3T4U73">qib</span>(<span class="mxinfo " id="T10:U59">3</span>)</span></span></span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="67,13" id="srcline13">13</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="67,14" id="srcline14">14</a></span><span class="line"><span class="mxinfo " id="T3:U60"><span class="var type1" id="S7T3U77">r21</span> = <span class="mxinfo  sgl" id="T3:U62">2*(<span class="mxinfo  sgl" id="T3:U63"><span class="mxinfo  sgl" id="T3:U64"><span class="mxinfo  sgl" id="T3:U65"><span class="var type1" id="S3T4U84">qib</span>(<span class="mxinfo " id="T10:U67">2</span>)</span>*<span class="mxinfo  sgl" id="T3:U68"><span class="var type1" id="S3T4U87">qib</span>(<span class="mxinfo " id="T10:U70">3</span>)</span></span>-<span class="mxinfo  sgl" id="T3:U71"><span class="mxinfo  sgl" id="T3:U72"><span class="var type1" id="S3T4U91">qib</span>(<span class="mxinfo " id="T10:U74">1</span>)</span>*<span class="mxinfo  sgl" id="T3:U75"><span class="var type1" id="S3T4U94">qib</span>(<span class="mxinfo " id="T10:U77">4</span>)</span></span></span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="67,15" id="srcline15">15</a></span><span class="line"><span class="mxinfo " id="T3:U78"><span class="var type1" id="S8T3U98">r22</span> = <span class="mxinfo  sgl" id="T3:U80"><span class="mxinfo  sgl" id="T3:U81"><span class="mxinfo  sgl" id="T3:U82"><span class="mxinfo  sgl" id="T3:U83"><span class="mxinfo  sgl" id="T3:U84"><span class="var type1" id="S3T4U104">qib</span>(<span class="mxinfo " id="T10:U86">1</span>)</span>^2</span>-<span class="mxinfo  sgl" id="T3:U87"><span class="mxinfo  sgl" id="T3:U88"><span class="var type1" id="S3T4U109">qib</span>(<span class="mxinfo " id="T10:U90">2</span>)</span>^2</span></span>+<span class="mxinfo  sgl" id="T3:U91"><span class="mxinfo  sgl" id="T3:U92"><span class="var type1" id="S3T4U114">qib</span>(<span class="mxinfo " id="T10:U94">3</span>)</span>^2</span></span>-<span class="mxinfo  sgl" id="T3:U95"><span class="mxinfo  sgl" id="T3:U96"><span class="var type1" id="S3T4U119">qib</span>(<span class="mxinfo " id="T10:U98">4</span>)</span>^2</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="67,16" id="srcline16">16</a></span><span class="line"><span class="mxinfo " id="T3:U99"><span class="var type1" id="S9T3U124">r23</span> = <span class="mxinfo  sgl" id="T3:U101">2*(<span class="mxinfo  sgl" id="T3:U102"><span class="mxinfo  sgl" id="T3:U103"><span class="mxinfo  sgl" id="T3:U104"><span class="var type1" id="S3T4U131">qib</span>(<span class="mxinfo " id="T10:U106">3</span>)</span>*<span class="mxinfo  sgl" id="T3:U107"><span class="var type1" id="S3T4U134">qib</span>(<span class="mxinfo " id="T10:U109">4</span>)</span></span>+<span class="mxinfo  sgl" id="T3:U110"><span class="mxinfo  sgl" id="T3:U111"><span class="var type1" id="S3T4U138">qib</span>(<span class="mxinfo " id="T10:U113">1</span>)</span>*<span class="mxinfo  sgl" id="T3:U114"><span class="var type1" id="S3T4U141">qib</span>(<span class="mxinfo " id="T10:U116">2</span>)</span></span></span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="67,17" id="srcline17">17</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="67,18" id="srcline18">18</a></span><span class="line"><span class="mxinfo " id="T3:U117"><span class="var type1" id="S10T3U145">r31</span> = <span class="mxinfo  sgl" id="T3:U119">2*(<span class="mxinfo  sgl" id="T3:U120"><span class="mxinfo  sgl" id="T3:U121"><span class="mxinfo  sgl" id="T3:U122"><span class="var type1" id="S3T4U152">qib</span>(<span class="mxinfo " id="T10:U124">2</span>)</span>*<span class="mxinfo  sgl" id="T3:U125"><span class="var type1" id="S3T4U155">qib</span>(<span class="mxinfo " id="T10:U127">4</span>)</span></span>+<span class="mxinfo  sgl" id="T3:U128"><span class="mxinfo  sgl" id="T3:U129"><span class="var type1" id="S3T4U159">qib</span>(<span class="mxinfo " id="T10:U131">1</span>)</span>*<span class="mxinfo  sgl" id="T3:U132"><span class="var type1" id="S3T4U162">qib</span>(<span class="mxinfo " id="T10:U134">3</span>)</span></span></span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="67,19" id="srcline19">19</a></span><span class="line"><span class="mxinfo " id="T3:U135"><span class="var type1" id="S11T3U166">r32</span> = <span class="mxinfo  sgl" id="T3:U137">2*(<span class="mxinfo  sgl" id="T3:U138"><span class="mxinfo  sgl" id="T3:U139"><span class="mxinfo  sgl" id="T3:U140"><span class="var type1" id="S3T4U173">qib</span>(<span class="mxinfo " id="T10:U142">3</span>)</span>*<span class="mxinfo  sgl" id="T3:U143"><span class="var type1" id="S3T4U176">qib</span>(<span class="mxinfo " id="T10:U145">4</span>)</span></span>-<span class="mxinfo  sgl" id="T3:U146"><span class="mxinfo  sgl" id="T3:U147"><span class="var type1" id="S3T4U180">qib</span>(<span class="mxinfo " id="T10:U149">1</span>)</span>*<span class="mxinfo  sgl" id="T3:U150"><span class="var type1" id="S3T4U183">qib</span>(<span class="mxinfo " id="T10:U152">2</span>)</span></span></span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="67,20" id="srcline20">20</a></span><span class="line"><span class="mxinfo " id="T3:U153"><span class="var type1" id="S12T3U187">r33</span> = <span class="mxinfo  sgl" id="T3:U155"><span class="mxinfo  sgl" id="T3:U156"><span class="mxinfo  sgl" id="T3:U157"><span class="mxinfo  sgl" id="T3:U158"><span class="mxinfo  sgl" id="T3:U159"><span class="var type1" id="S3T4U193">qib</span>(<span class="mxinfo " id="T10:U161">1</span>)</span>^2</span>-<span class="mxinfo  sgl" id="T3:U162"><span class="mxinfo  sgl" id="T3:U163"><span class="var type1" id="S3T4U198">qib</span>(<span class="mxinfo " id="T10:U165">2</span>)</span>^2</span></span>-<span class="mxinfo  sgl" id="T3:U166"><span class="mxinfo  sgl" id="T3:U167"><span class="var type1" id="S3T4U203">qib</span>(<span class="mxinfo " id="T10:U169">3</span>)</span>^2</span></span>+<span class="mxinfo  sgl" id="T3:U170"><span class="mxinfo  sgl" id="T3:U171"><span class="var type1" id="S3T4U208">qib</span>(<span class="mxinfo " id="T10:U173">4</span>)</span>^2</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="67,21" id="srcline21">21</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="67,22" id="srcline22">22</a></span><span class="line"><span class="comment">% Kreiranje rotacijske matrice I -&gt; B od izracunatih elemenata</span></span></span>
<span class="srcline"><span class="lineno"><a href="67,23" id="srcline23">23</a></span><span class="line"><span class="mxinfo  sgl" id="T27:U174"><span class="var type1 sgl" id="S2T27U213">Rib</span> = <span class="mxinfo " id="T27:U176">[<span class="mxinfo " id="T28:U177"><span class="var type1" id="S4T3U216">r11</span>,<span class="var type1" id="S5T3U217">r12</span>,<span class="var type1" id="S6T3U218">r13</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="67,24" id="srcline24">24</a></span><span class="line">       <span class="mxinfo " id="T28:U181"><span class="var type1" id="S7T3U220">r21</span>,<span class="var type1" id="S8T3U221">r22</span>,<span class="var type1" id="S9T3U222">r23</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="67,25" id="srcline25">25</a></span><span class="line">       <span class="mxinfo " id="T28:U185"><span class="var type1" id="S10T3U224">r31</span>,<span class="var type1" id="S11T3U225">r32</span>,<span class="var type1" id="S12T3U226">r33</span></span>]</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="67,26" id="srcline26">26</a></span><span class="line"><span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="67,27" id="srcline27">27</a></span><span class="line"></span></span>
</pre>
